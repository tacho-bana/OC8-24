<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <audio id="audio" controls>
        <source src="{{ url_for('uploaded_file', filename=file_path.split('/')[-1]) }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <script>
        const colorChanges = {{ color_changes | tojson | safe }};
        const timestamps = {{ timestamps | tojson | safe }};
        let index = 0;

        const audio = document.getElementById('audio');
        audio.ontimeupdate = function() {
            if (index < timestamps.length && audio.currentTime >= timestamps[index]) {
                document.body.style.backgroundColor = colorChanges[index];
                index++;
            }
        };
    </script>
</body>
</html>
